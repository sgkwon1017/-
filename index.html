<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sleep Better - 학생 수면 관리 앱</title>
  <link href="style.css" rel="stylesheet" type="text/css" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <!-- 로딩 화면 -->
  <div id="loading-screen" class="loading-screen">
    <div class="loading-content">
      <i class="fas fa-moon loading-icon"></i>
      <h2>Sleep Better</h2>
      <p>수면 습관 개선을 위한 여정을 시작하세요</p>
    </div>
  </div>

  <!-- 메인 컨테이너 -->
  <div id="app-container" class="app-container hidden">
    <!-- 상단 네비게이션 -->
    <nav class="top-nav">
      <div class="nav-brand">
        <i class="fas fa-moon"></i>
        <span>Sleep Better</span>
      </div>
      <div class="nav-user">
        <div class="user-stats">
          <span class="user-level">Lv. <span id="user-level">1</span></span>
          <span class="user-points"><i class="fas fa-star"></i> <span id="user-points">0</span></span>
        </div>
        <div class="user-avatar">
          <i class="fas fa-user"></i>
        </div>
      </div>
    </nav>

    <!-- 하단 탭 네비게이션 -->
    <div class="bottom-nav">
      <button class="nav-tab active" data-tab="home">
        <i class="fas fa-home"></i>
        <span>홈</span>
      </button>
      <button class="nav-tab" data-tab="tracking">
        <i class="fas fa-chart-line"></i>
        <span>기록</span>
      </button>
      <button class="nav-tab" data-tab="rewards">
        <i class="fas fa-trophy"></i>
        <span>보상</span>
      </button>
      <button class="nav-tab" data-tab="ai-chat">
        <i class="fas fa-robot"></i>
        <span>AI 상담</span>
      </button>
      <button class="nav-tab" data-tab="community">
        <i class="fas fa-users"></i>
        <span>커뮤니티</span>
      </button>
    </div>

    <!-- 메인 콘텐츠 영역 -->
    <main class="main-content">
      <!-- 홈 화면 -->
      <section id="home" class="tab-content active">
        <div class="dashboard">
          <div class="welcome-card">
            <h2>안녕하세요! 👋</h2>
            <p>오늘도 건강한 수면을 위해 함께 노력해요!</p>
          </div>

          <div class="quick-stats">
            <div class="stat-card">
              <div class="stat-icon">
                <i class="fas fa-bed"></i>
              </div>
              <div class="stat-info">
                <h3 id="last-sleep-duration">0시간</h3>
                <p>어제 수면 시간</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">
                <i class="fas fa-target"></i>
              </div>
              <div class="stat-info">
                <h3 id="weekly-goal-progress">0%</h3>
                <p>주간 목표 달성률</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">
                <i class="fas fa-ranking-star"></i>
              </div>
              <div class="stat-info">
                <h3 id="current-rank">#-</h3>
                <p>현재 랭킹</p>
              </div>
            </div>
          </div>

          <div class="quick-actions">
            <button class="action-btn primary" onclick="showSleepRecord()">
              <i class="fas fa-plus"></i>
              <span>수면 기록하기</span>
            </button>
            <button class="action-btn secondary" onclick="showRecommendations()">
              <i class="fas fa-lightbulb"></i>
              <span>AI 추천 보기</span>
            </button>
          </div>
        </div>
      </section>

      <!-- 수면 기록 화면 -->
      <section id="tracking" class="tab-content">
        <div class="tracking-header">
          <h2>수면 기록</h2>
          <div class="view-toggle">
            <button class="toggle-btn active" data-period="daily">일별</button>
            <button class="toggle-btn" data-period="weekly">주별</button>
            <button class="toggle-btn" data-period="monthly">월별</button>
          </div>
        </div>

        <div class="sleep-record-form">
          <div class="form-card">
            <h3>오늘의 수면 기록</h3>
            <div class="form-group">
              <label>취침 시간</label>
              <input type="time" id="bedtime" />
            </div>
            <div class="form-group">
              <label>기상 시간</label>
              <input type="time" id="waketime" />
            </div>
            <div class="form-group">
              <label>수면 질</label>
              <div class="sleep-quality-options">
                <button class="quality-btn" data-quality="1">😴 매우 나쁨</button>
                <button class="quality-btn" data-quality="2">😕 나쁨</button>
                <button class="quality-btn" data-quality="3">😐 보통</button>
                <button class="quality-btn" data-quality="4">😊 좋음</button>
                <button class="quality-btn" data-quality="5">😄 매우 좋음</button>
              </div>
            </div>
            <button class="submit-btn" onclick="saveSleepRecord()">기록 저장</button>
          </div>
        </div>

        <div class="chart-container">
          <canvas id="sleepChart"></canvas>
        </div>

        <div class="sleep-history">
          <h3>최근 수면 기록</h3>
          <div id="sleep-history-list" class="history-list">
            <!-- 수면 기록 리스트가 여기에 동적으로 추가됩니다 -->
          </div>
        </div>
      </section>

      <!-- 보상 및 랭킹 화면 -->
      <section id="rewards" class="tab-content">
        <div class="rewards-header">
          <h2>보상 & 랭킹</h2>
        </div>

        <div class="user-progress">
          <div class="level-card">
            <h3>현재 레벨: <span id="current-level">1</span></h3>
            <div class="progress-bar">
              <div class="progress-fill" id="level-progress"></div>
            </div>
            <p>다음 레벨까지 <span id="points-to-next">100</span> 포인트</p>
          </div>
        </div>

        <div class="achievements">
          <h3>획득한 뱃지</h3>
          <div class="badge-grid" id="badge-grid">
            <!-- 뱃지들이 여기에 동적으로 추가됩니다 -->
          </div>
        </div>

        <div class="rankings">
          <h3>랭킹</h3>
          <div class="ranking-tabs">
            <button class="ranking-tab active" data-ranking="sleep-time">수면 시간</button>
            <button class="ranking-tab" data-ranking="goal-achievement">목표 달성률</button>
            <button class="ranking-tab" data-ranking="activity-score">활동 점수</button>
          </div>
          <div class="ranking-list" id="ranking-list">
            <!-- 랭킹 리스트가 여기에 동적으로 추가됩니다 -->
          </div>
        </div>
      </section>

      <!-- AI 상담 화면 -->
      <section id="ai-chat" class="tab-content">
        <div class="chat-header">
          <h2>AI 수면 상담</h2>
          <button class="clear-chat-btn" onclick="clearChat()">
            <i class="fas fa-trash"></i>
          </button>
        </div>

        <div class="chat-container">
          <div class="chat-messages" id="chat-messages">
            <div class="message ai-message">
              <div class="message-avatar">
                <i class="fas fa-robot"></i>
              </div>
              <div class="message-content">
                <p>안녕하세요! 수면 전문 AI 상담사입니다. 수면에 관련된 어떤 질문이든 편하게 물어보세요! 😊</p>
                <div class="message-time">방금 전</div>
              </div>
            </div>
          </div>

          <div class="quick-questions">
            <h4>자주 묻는 질문</h4>
            <div class="quick-question-buttons">
              <button class="quick-question" onclick="askQuickQuestion('적절한 수면 시간은 얼마나 되나요?')">
                적절한 수면 시간은?
              </button>
              <button class="quick-question" onclick="askQuickQuestion('잠이 잘 안 와요. 어떻게 해야 하나요?')">
                불면증 해결법은?
              </button>
              <button class="quick-question" onclick="askQuickQuestion('꿈을 많이 꾸는 것이 정상인가요?')">
                꿈을 많이 꾸는 이유는?
              </button>
            </div>
          </div>

          <div class="chat-input-area">
            <div class="chat-input">
              <input type="text" id="chat-input" placeholder="수면에 대해 궁금한 것을 물어보세요..." />
              <button id="send-btn" onclick="sendMessage()">
                <i class="fas fa-paper-plane"></i>
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- 커뮤니티 화면 -->
      <section id="community" class="tab-content">
        <div class="community-header">
          <h2>꿀팁 커뮤니티</h2>
          <button class="new-post-btn" onclick="showNewPostModal()">
            <i class="fas fa-plus"></i>
            <span>새 글 작성</span>
          </button>
        </div>

        <div class="community-tabs">
          <button class="community-tab active" data-filter="all">전체</button>
          <button class="community-tab" data-filter="popular">인기</button>
          <button class="community-tab" data-filter="recent">최신</button>
          <button class="community-tab" data-filter="tips">꿀팁</button>
        </div>

        <div class="posts-container" id="posts-container">
          <!-- 커뮤니티 게시글들이 여기에 동적으로 추가됩니다 -->
        </div>
      </section>
    </main>
  </div>

  <!-- 모달들 -->
  <!-- 수면 기록 모달 -->
  <div id="sleep-record-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>수면 기록하기</h3>
        <button class="close-btn" onclick="closeSleepRecordModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <!-- 수면 기록 폼이 여기에 들어갑니다 -->
      </div>
    </div>
  </div>

  <!-- 새 글 작성 모달 -->
  <div id="new-post-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>새 글 작성</h3>
        <button class="close-btn" onclick="closeNewPostModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>제목</label>
          <input type="text" id="post-title" placeholder="글 제목을 입력하세요" />
        </div>
        <div class="form-group">
          <label>카테고리</label>
          <select id="post-category">
            <option value="tip">꿀팁</option>
            <option value="question">질문</option>
            <option value="experience">경험담</option>
            <option value="general">일반</option>
          </select>
        </div>
        <div class="form-group">
          <label>내용</label>
          <textarea id="post-content" placeholder="내용을 입력하세요..."></textarea>
        </div>
        <div class="modal-actions">
          <button class="btn secondary" onclick="closeNewPostModal()">취소</button>
          <button class="btn primary" onclick="submitNewPost()">게시</button>
        </div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>

</html>